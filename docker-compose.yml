version: '2'
services:
  ollama:
    build:
      context: .
      dockerfile: ./Dockerfile
    labels:
      lagoon.type: basic-persistent
      lagoon.persistent: /root/.ollama
      lagoon.service.port: 11435
      lagoon.autogeneratedroute: true
    volumes:
      - ./root/.ollama:/home/ollama/.ollama:delegated
    platform: linux/amd64
    ports:
      - 11435:11434
    pull_policy: always
    tty: true
    restart: always
